<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GAME BRAIN</title>
	{include file="./static/html/header_common.html" /}
	<link href="/static/css/adspend.css?t=122444455" rel="stylesheet" type="text/css">
    <link href="/static/css/checkbox.css" rel="stylesheet" type="text/css">
	 <link rel="stylesheet" type="text/css" media="all" href="/static/plugin/jquery-time/daterangepicker-bs3.css" />
	<style>
	 .allow_click{cursor:pointer}
	  th,td{text-align:center;vertical-align:middle}
	 .hw_reven thead tr {
    background-color: #f9f9f9;
}
	 .hw_reven table {
    border-collapse: collapse;
    font-size: 12px !important;
    color: #222 !important;
    text-align: left !important;
    line-height: 40px;
}
.hw_reven .table > thead > tr > th{
  border-bottom:1px solid #e8e8e8 !important;
  border-top:1px solid #e8e8e8 !important;
   color: #222 !important;
}
	</style>
</head>
<body>
    <div id="wrapper" style="background-color: #fff;" >
        
		{include file="./static/html/header.html" /} 
	
		<div class="hw_page_content">
		    
		    <div class="hw_menu_left">
         {include file="./static/html/side.html" /}  
			</div>
		    <div class="hw_content_right">	
			  <ul class="search_tab clearfix" >
			      <li class="active"><a  href="javascript:;">广告花费</a></li>
				  <li><a  href="/admin_finance/group_channel">渠道汇总</a></li>
				  <?php $infos =getuserinfo(); if($infos["username"]=="lxf"){ ?>
				  <li style="float:right;"><a style="font-size:12px;text-decoration:underline" href="/admin_adspend/relateapp"><i style="vertical-align:middle" class="fa fa-volume-off"></i>&nbsp;campagin 关联</a></li>
			     <?php } ?>
			   </ul>
			     <div class="hw_content">
				   						
					 <div class="hw_dashboard">
					     <div class="hw_dashboard-column">
						   <div class="hw_dashboard-primary"><em style="font-size:16px;font-style:normal">$</em>{$sumdata.spend}</div>
						   <div class="hw_dashboard-secondary"> 花费</div>
						 </div>
						<div class="hw_dashboard-column">
						     <div class="hw_dashboard-primary">{$sumdata.installs}</div>
						     <div class="hw_dashboard-secondary">安装</div>
						</div>
						<div class="hw_dashboard-column">
						     <div class="hw_dashboard-primary">${$sumdata.cpi}</div>
						    <div class="hw_dashboard-secondary">CPI</div>
						</div>
						
					  </div>
			          <div style="float:left;margin-top:35px;font-size:18px;margin-left:10px;">概览趋势</div>
					  <div class="hw_ad_title">
					     						  
						     <span>	
                                <span class="hw-date-wrapper">
						          <input readonly="" id="start_date" placeholder="开始日期  -  结束日期" class="hw-input" value="{$start_date}  -  {$end_date}" type="text">
						        </span>							 
								<a {if condition="$index eq 'three'"} class="active" {/if} date="three">3天</a>
								<a {if condition="$index eq 'oneweek'"} class="active" {/if} date="oneweek">7天</a>
								<a {if condition="$index eq 'twoweek'"} class="active" {/if} date="twoweek">14天</a>
							 </span>						    
					   </div>
					  
					    <div class="hw_chat" id="chats" style="height:300px;margin-top:28%;"></div>
					    <div style="float:left;margin-top:35px;font-size:18px;margin-left:10px;">详情展示</div>
					 
					  <div style="float:right;margin-top:35px;margin-right:10px;">
							 <div style="float:left;" class="el-checkbox el-checkbox-red">
								
								<input name="group_type" id="qudao" {if condition="$type eq 'channel'"} checked {/if} value="channel"   type="checkbox">
							   <label class="el-checkbox-style" for="qudao"></label>
							   <span class="margin-r">渠道</span>
							 </div>
							 
							 <div style="float:left;margin-left:10px;" class="el-checkbox el-checkbox-red">
								
								<input name="group_type" id="day" value="day" {if condition="$type eq 'day'"} checked {/if} type="checkbox">
							   <label class="el-checkbox-style" for="day"></label>
							   <span class="margin-r">按天</span>
							 </div>
					  </div>
				      <div class="hw_reven clearfix" style="margin-top:50px;padding:30px 0px;">
						  <table class="table">
							  <thead style="font-size:13px;">
								<tr>
								  <th>日期</th>
								  <th style="text-align:left;">名称</th>
								  <th>花费</th>
								  <th>展示</th>
								  <th>点击</th>
								  <th>安装</th>
								  <th>CPI</th>
								</tr>
							  </thead>
							  <tbody>
								{volist name="data" id="item"}
								<tr>
								  <td>{$item.date}</td>
								  <td style="text-align:left;">{$item.name}</td>
								  <td>${$item.spend}</td>
								  <td>{$item.impression}</td>
								  <td>{$item.clicks}</td>
								  <td>{$item.installs}</td>
                                  <td>{$item.cpi}</td>								  
								</tr>
								{/volist}
							  </tbody>
							</table>
						</div>
			    </div>
           	</div>
         </div>
       {include file="./static/html/footer.html" /}		 
	</div>
   {include file="./static/html/footer_common.html" /}
    <script type="text/javascript" src="/static/plugin/jquery-time/moment.js"></script>
   <script type="text/javascript" src="/static/plugin/jquery-time/daterangepicker.js"></script>
    <script src="/static/js/echarts.min.js"></script>
  
</body>
  <script>
     var start_date="{$start_date}";
	 var end_date = "{$end_date}";
    $(function(){
	 lineechats();
  
	  $('#start_date').daterangepicker({opens:'left',minDate:'2018-07-08'},function(start, end, label) {
	 
		 start_date = start.format('YYYY-MM-DD');end_date=end.format('YYYY-MM-DD');
		
		 var app_id='{$appid}';
		 var type ='{$type}';
		 var url = "/admin_adspend/advertising?appid="+app_id+"&type="+type+"&index=&start_date="+start_date+"&end_date="+end_date;
		 window.location.href=url;
	  });
	  
	   $(".hw_ad_title a").click( function(){
	     var index = $(this).attr("date");
		 var app_id='{$appid}';
		 var type ='{$type}';
		 var url = "/admin_adspend/advertising?appid="+app_id+"&type="+type+"&index="+index;
		 window.location.href=url;
		 return false;
	  })
	  
	  $("input[name='group_type']").click( function(){
	     var type = $(this).val();
		 var index = $(".hw_ad_title .active").attr("date");
		 var app_id='{$appid}';
			var url = "/admin_adspend/advertising?appid="+app_id+"&type="+type+"&index="+index+"&start_date="+start_date+"&end_date="+end_date;
			window.location.href=url;
	  })
			  	
	   $(".bar_allow_roe").click( function(){
	       
		   if( $(this).find("i").hasClass("fa-angle-double-right") )
		      {
			     $(this).find("i").removeClass("fa-angle-double-right");
				 $(this).find("i").addClass("fa-angle-double-left");
				 $(this).animate({'left':'21%'},1000);
				 $(".hw_app_navlist").show(1000);
			  }else{
			     $(this).find("i").removeClass("fa-angle-double-left");
				 $(this).find("i").addClass("fa-angle-double-right");
				 $(this).animate({'left':'0%'},1000);
				 $(".hw_app_navlist").hide(1000);
			  }
	   })
	    
	   $("input[name='app_id']").click( function(){
	       var app_id  =$(this).val();
			var type = $("input[name='group_type']:checked").val();
			var index = $(".hw_ad_title .active").attr("date");
			var url = "/admin_adspend/advertising?appid="+app_id+"&type="+type+"&index="+index+"&start_date="+start_date+"&end_date="+end_date;
			window.location.href=url;
	   })	   
	   
	}); 
	
	function lineechats()
  {
	  var myChart = echarts.init(document.getElementById("chats"));
	  var option = {
    title: {
        text: ''
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['花费','安装','CPI'],
		top:'20'
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis: {
        type: 'category',
        boundaryGap: false,
        data: [{$chats.date}]
    },
    yAxis: {
        type: 'value'
    },
    series: [
        {
            name:'花费',
			smooth:true,
            type:'line',
            stack: '总量',
            data:[{$chats.spend}]
        },
        {
            name:'安装',
			smooth:true,
            type:'line',
            stack: '总量',
            data:[{$chats.installs}]
        },
        {
            name:'CPI',
			smooth:true,
            type:'line',
            stack: '总量',
            data:[{$chats.cpi}]
        }
    ]
};

	 myChart.setOption(option); 
  }
  </script>
</html>
