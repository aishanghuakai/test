<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GAME BRAIN</title>
    {include file="./static/html/header_common.html" /}
	<link href="/static/css/checkbox.css" rel="stylesheet" type="text/css">	
	<link href="/static/css/finance.css?t=<?php echo time() ?>" rel="stylesheet" type="text/css" />
		 <link rel="stylesheet" type="text/css" media="all" href="/static/plugin/jquery-time/daterangepicker-bs3.css" />
    <style>
	  
	</style>	
</head>
 
<body style="background-color: #f2edf3;">
    <div id="wrapper" style="background-color: #f2edf3;">
        {include file="./static/html/header.html" /}	
		<div class="hw_page_content" style="background: #f2edf3;">
		    <div class="hw_menu_left">
         {include file="./static/html/side.html" /}  
			</div>
		    <div class="hw_content_right" style="background: #f2edf3;">
			     <h4 class="page-title" style="float:left;">推广渠道数据</h4>
				 <h4 class="page-title" style="float:left;font-size:12px;color:#ccc"><a href="/admin_finance/channel?ad_type=pub">变现渠道数据</a></h4>
               <div style="padding:0px 10px;clear:both;">
			    
			     <div class="channel_left">
				    <ul>
					   <li class="border"><a data="6" class="channel_active" href="javascript:;"><img src="/static/img/app/facebook.png">Facebook</a></li>
					   <li class="border"><a data="32" href="javascript:;"><img src="/static/img/app/toutiao.png">TouTiao</a></li>
					   <li class="border"><a data="5" href="javascript:;"><img src="/static/img/app/adwords.png">Adwords</a></li>
					   <li class="border"><a data="2" href="javascript:;"><img src="/static/img/app/unity.png">Unity</a></li>
					   <li class="border"><a data="4" href="javascript:;"><img src="/static/img/app/vungle.png">Vungle</a></li>
					   <li class="border"><a data="3" href="javascript:;"><img src="/static/img/app/applovin.png">Applovin</a></li>
					   <li class="border"><a data="8" href="javascript:;"><img src="/static/img/app/chartboost.png">Chartboost</a></li>
					   <li class="border"><a data="31" href="javascript:;"><img src="/static/img/app/adcolony.png">Adcolony</a></li>					   
					   <li class="border"><a data="1" href="javascript:;"><img src="/static/img/app/Mobvista.png">Mobvista</a></li>
					   <li class="border"><a data="7" href="javascript:;"><img src="/static/img/app/ironSource.png">IronSource</a></li>
					   <li class="border"><a data="9" href="javascript:;"><img src="/static/img/app/tapjoy.png">Tapjoy</a></li>
					    <li class="border"><a data="36" href="javascript:;"><img src="/static/img/app/default.png">TikTok</a></li>
						<li class="border"><a data="38" href="javascript:;"><img src="/static/img/app/default.png">Snapchat</a></li>
						<li class="border"><a data="39" href="javascript:;"><img src="/static/img/app/default.png">ASM</a></li>
						<li class="border"><a data="42" href="javascript:;"><img src="/static/img/app/default.png">KuaiShou</a></li>
					   {volist name="pp" id="vv"}
					     <li class="border"><a data="{$vv.platform_name}" href="javascript:;"><img src="/static/img/app/default.png">{$vv.platform_name}</a></li>
						{/volist}
					</ul>
				 </div>
				 <div class="channel_right">
				 <div class="channel">
				   <div class="m-query_top">
						  <div class="fix_date" style="float:left;">
						   <input  id="date" style="cursor:pointer;width:200px;height:33px;" placeholder="{$start}到{$end}">                           							
						  </div>
						 <div style="float:left;height:33px;margin-left:10px;position:relative">
						  <input class="search-input" id="country" data="all" style="height:33px;" placeholder="全部国家">
						  <ul class="dropdown-menu country" style="margin-top:10px;overflow-y:scroll;z-index: 10 !important; display:none;">
							{volist name="allcountrys" id="vv"}				  
							  <a class="dropdown-item"  href="javascript:;">
							  <div class="el-checkbox el-checkbox-red">									
									<input type="checkbox" value="{$key}" data="{$vv}" class="checkcountry" name="check" id="cc_{$key}">
									<label class="el-checkbox-style" for="cc_{$key}"></label>
									<span class="margin-r">{$vv}</span>
								</div>
							  </a>
							{/volist}		  																					 
						  </ul>							  
					   </div>
                         				   
					</div>
				 </div>
                 <div style="clear:both"></div>
                  <div class="rows" style="margin-top:20px">
				    <div class="card">
                <div class="card-body">
                  <div class="card-title" style="float:right;">
				    <div>
						<span class="margin-r">按月份</span>
						<label class="el-switch el-switch-green">
							<input type="checkbox" id="send_switch" checked name="switch">
							<span class="el-switch-style"></span>
						</label>
						<span class="margin-r">按产品</span>
					</div></div>
                  <div class="table-responsive">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>
                            名称
                          </th>
                          <th>
                            花费
                          </th>
                          <th>
                            安装量
                          </th>
                          <th>
                            单价
                          </th>
                          
                        </tr>
                      </thead>
                      <tbody id="content">
					    {volist name="data" id="vo"}
                        <tr>
                          <td style="color:#e83e8c">
						    {if condition="isset($vo['icon_url'])"}
                              <img src="{$vo.icon_url}" class="mr-2" alt="image">
							{/if}
                            {$vo.appcation}
                          </td>
                          <td>
                            ${$vo.spend}
                          </td>
                         
                          <td>
                            {$vo.installs}
                          </td>
                          <td>
                            ${$vo.cpi}
                          </td>
                        </tr>
                      {/volist}                      
                      </tbody>
                    </table>
                  </div>
                </div>
              </div> 
				  </div>
                </div>				  
			   </div>						
			</div>
		</div>
		 {include file="./static/html/footer.html" /}
	</div>	
</body>
 {include file="./static/html/footer_common.html" /}
   <script type="text/javascript" src="/static/plugin/jquery-time/moment.js"></script>
   <script type="text/javascript" src="/static/plugin/jquery-time/daterangepicker.js"></script>
 <script>
    var platform="6";
	    group="product";
		start_date="{$start}";
		end_date="{$end}";
		country="all";
    $( function(){
	   
	    $('#date').daterangepicker({ minDate:'2019-01-01',opens:'right' },function(start, end, label) {
	 
		    start_date = start.format('YYYY-MM-DD');end_date=end.format('YYYY-MM-DD');
			$('#date').val(start_date+" 到 "+end_date);
			loaddata();
		 });
		
		 $(".checkcountry").click( function(){
		    var countrys ="";
			var countryname ="";
		    $.each($('.checkcountry:checked'),function(){
               countrys+="'"+$(this).val()+"',";
			   countryname+=$(this).attr("data")+".";
            });
			 countrys+="'-1'";
			 $("#country").val(countryname);
			  country = countrys;
			 loaddata();
		 })
		 
		 $("#wrapper").click( function(e){
		 
		   var target = $(e.target);
          
			if(target.context.nodeName=="LABEL" || target.context.nodeName=="INPUT" )
			{
			  return;
			}          	
		   $(".country").hide();
		   
		 })
		$("#country").click( function(){
		    $(".country").show();
			return false;
		 });
		 
		 $(".channel_left a").click( function(){
		   $(".channel_left a").removeClass("channel_active");
		   $(this).addClass("channel_active");
		   platform = $(this).attr("data");
		   loaddata();
		})
		
		$("#send_switch").click( function(){
			if( $(this).is(':checked') )
			  {
				group="product";			
			  }else{
			     group="month";
			  }
			  loaddata();
	    } )
	})
	
	var loaddata = function()
	{
	   var index = layer.load();
			   $.post("/admin_finance/channel_data_json",{start:start_date,end:end_date,country:country,platform:platform,group:group},function(e){
					 layer.closeAll();					 					 
                    $("#content").html(e); 				 
			   })
	}
 </script>
</html>