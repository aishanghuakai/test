<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>GAME BRAIN</title>
	{include file="./static/html/header_common.html" /}
	<link rel="stylesheet" type="text/css" media="all" href="/static/plugin/jquery-time/daterangepicker-bs3.css"/>
	<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<!-- import JavaScript -->
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	<script src="/static/js/axios.min.js"></script>
	<style>
	  .cell {
			font-size: 12px;
		}

		.el-table td, .el-table th {
			padding: 9px 0;
		}

		.item {
			margin-top: 10px;
			margin-right: 40px;
		}
	</style>
</head>
<body>
<div id="wrapper" style="background-color: #fff;">
	{include file="./static/html/header.html" /}
	<div class="hw_page_content">
		<div class="hw_menu_left">
			{include file="./static/html/side.html" /}
		</div>
		<div class="hw_content_right" style="padding:10px 10px;">
            <ul class="search_tab clearfix" >
				 <li><a  href="/admin_adset/personal_product">产品消耗</a></li>
			      <li class="active"><a  href="/admin_adset/producer_product">制作人消耗</a></li>			  
		      </ul>
			<div class="hw_reven clearfix" style="padding:20px 30px;">
				<div class="main" style="margin-bottom:0px;">
					<el-form :inline="true" class="demo-form-inline">
						<el-form-item label="日期筛选">
							<el-date-picker
								v-model="date"
								type="daterange"
								@change="getlist"
								value-format="yyyy-MM-dd"
								style="width:300px;"
								start-placeholder="开始"
								end-placeholder="结束">
							</el-date-picker>
						</el-form-item>
						<el-form-item label="产品筛选">
							<el-select v-model="product_id" filterable  @change="getlist" style="width:300px;" placeholder="请选择">
								<el-option label="全部产品" value="all"></el-option>
								{volist name="product" id="vo"}
								  <el-option label="{$vo.name}" value="{$vo.id}"></el-option>
                                {/volist}								  
							</el-select>
						</el-form-item>
					</el-form>
			    </div>
				<div class="clear"></div>
				<div class="hw_reven clearfix" style="">
					<el-table :data="tableData" v-loading="loading" height="550" style="width: 100%;" :load="load" row-key="id" lazy :tree-props="{children: 'children', hasChildren: 'hasChildren'}">
						<el-table-column prop="name" width="300px;" label="制作人"></el-table-column>
						<el-table-column prop="num" sortable align="center" label="制作数量"></el-table-column>
						<el-table-column prop="spend" sortable align="center" label="花费"></el-table-column>
						<el-table-column prop="ctr" sortable align="center" label="CTR"></el-table-column>
						<el-table-column prop="cvr" sortable align="center" label="CVR"></el-table-column>
					</el-table>
				</div>
			</div>
		</div>
	</div>
	{include file="./static/html/footer.html" /}
</div>

</body>
{include file="./static/html/footer_common.html" /}


<script>
  new Vue({
		el: '#wrapper',
		data: {
			loading: false,
			date: ['{$start}','{$end}'],
			product_id: 'all',
			tableData: []
		},
		created() {
           this.getlist()
		},
		methods: {
		   getlist() {				
				this.loading = true
				let param ={
				   product_id:this.product_id,
				   date:this.date
				}
				let _that = this
				axios({
					method: 'post',
					url: '/admin_adset/producer_json',
					data: param
				}).then(res => {
					_that.loading = false
					this.tableData = res.data
				})
			},
			load(tree, treeNode, resolve) {
			  let param = {
			      product_id:this.product_id,
				  date:this.date,
				  name:tree.id
			  }
			  axios({
					method: 'post',
					url:'/admin_adset/children_producer_json',
					data:param
				}).then(res=>{
				 resolve(res.data)
			 })
			}
		}
	})
</script>
</html>